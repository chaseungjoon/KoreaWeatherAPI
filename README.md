# 실시간 종합 재난 상황

- 화재 ✅
- 홍수
- 산사태 ✅
- 폭설
- 안개

---

# 데이터 소스

> ## 기상 관측
### **기상청 OpenAPI**
  - **제공 데이터**: 기온, 기압, 운고, 운량, 가시거리  
  - **업데이트 주기**: 1분 단위 (실제 반영 약 5~7분 지연)

> ## 화재 모니터링

### **산림청 API**  ✅
  - **업데이트 주기**: 실시간, 화재 신고 시 즉각 업데이트

### **NASA FIRMS API**  
  - **업데이트 주기**: 일 2회 (01–03시, 13–14시)  

### **천리안2호 API**   
  - **업데이트 주기**: 2분 단위 (실제 반영 약 10시간 지연)  
  - **참고 문서**: [메타데이터 링크](https://datasvc.nmsc.kma.go.kr/datasvc/html/base/cmm/selectPage.do?page=static.software)

> ## 홍수 모니터링

### Google Flood Forcasting API (승인 대기중)
  - **업데이트 주기**: Several times a day (약 4~6시간 간격)
  - **제공 데이터**: 최근 홍수 status
  - **참고 문서**: [Google Flood Forcasting](https://developers.google.com/flood-forecasting/rest?hl=ko)

### 침수흔적도 OpenAPI
  - **갱신주기**: 매년 1회 (연말)
  - **제공 데이터**: 침수흔적도 사진파일(png) (좌표 : 124 ~ 132E, 33 ~ 39N)
  - **참고 문서**: [침수흔적도 OpenAPI](https://safemap.go.kr/opna/data/dataView.do)

  - OpenCV 활용 침수흔적도 픽셀 좌표 추출 -> csv 저장 `(safemap_data/csv/*.csv)`
    - Error rate : 20% 

> ## 산사태 모니터링

### 산림청 산사태 예측 API ✅
  - **업데이트 주기**: 5분단위 (라고 나와있지만 실질적으로 매일 오전 갱신 되는듯?)
  - **제공 데이터**: 산사태 발생 가능성이 높은 지역을 예측
  - **참고문서**: [산림청 산사태 예측정보 OpenAPI](https://www.safetydata.go.kr/disaster-data/view?dataSn=696)

---

# 1. KFS (산림청)

## 1-1. KFS (산림청) 화재 API `(kfs_data/*.csv)`

### 실시간 산불 정보
- **생산주기**: 화재 신고 시 실시간 업데이트  
- **웹사이트**: [산림청 산불 GIS 시스템](http://fd.forest.go.kr/ffas/gis/main.do)

#### API 응답 필드

| 필드명 | 값 | 해석 |
|--------|----|------|
| frfrInfoId | 398504 | 산불 사건 고유 ID |
| frfrFrngDtm | 2025-08-22 14:41:22 | 산불 발생 시각 |
| frfrSttmnDt | 20250822 | 신고 일자 (YYYYMMDD) |
| frfrSttmnHms | 144122 | 신고 시각 (HHMMSS → 14:41:22) |
| frfrSttmnAddr | 충청북도 음성군 감곡면 영산리 | 신고 행정 주소 |
| frfrSttmnAddrDe | 충청북도 음성군 감곡면 영산리 산55-3임 | 상세 주소 |
| frfrLctnXcrd | 127.67243000000057 | 발생 위치 X좌표 (경도) |
| frfrLctnYcrd | 37.08104000024055 | 발생 위치 Y좌표 (위도) |
| frfrSttmnLctnXcrd | 127.67243000000029 | 신고 위치 X좌표 (경도) |
| frfrSttmnLctnYcrd | 37.08104000012027 | 신고 위치 Y좌표 (위도) |
| lgdngCd | 4377037026 | 행정동 코드 |
| frfrPrgrsStcd | 02 | 진행 상태 코드 |
| frfrPrgrsStcdNm | 진화중 | 진행 상태명 |
| frfrPotfrRt | 70 | 진화율(%) |
| frfrStepIssuCd | 00 | 대응 단계 코드 |
| frfrStepIssuNm | 초기 대응 | 대응 단계명 |
| frfrOccrrTpcd | 05 | 발생 유형 코드 (코드표 필요) |
| frfrOccrrStcd | 31 | 발생 원인 세부 코드 (코드표 필요) |

## 1-2. KFS (산림청) 산사태 API `(kfs_data/landslide/*.csv)`

### 실시간 산사태 예측 정보
- **생산주기**: 5분단위

### 요청변수

| 항목명(국문)              | 항목명(영문)  | 타입     | 항목크기 | 항목구분 | 항목설명                |
|---------------------------|---------------|----------|----------|----------|-------------------------|
| 서비스키                  | serviceKey    | STRING   | 50       | Y        | 서비스키                |
| 페이지당개수              | numOfRows     | NUMBER   | 30       | N        | 페이지당개수            |
| 페이지번호                | pageNo        | NUMBER   | 30       | N        | 페이지번호              |
| 응답타입(json,xml)        | returnType    | VARCHAR  | 30       | N        | 응답타입(json,xml)      |
| 조회시작일자(YYYYMMDD)    | inqDt         | STRING   | -        | N        | 조회시작일자(YYYYMMDD) |

### API 응답 필드

| 항목명(국문) | 항목명(영문)   | 타입 | 항목크기 | 항목구분 | 항목설명     |
|--------------|----------------|------|----------|----------|--------------|
| 산사태예보명 | LNLD_FRCST_NM  | -    | 20       | Y        | 산사태예보명 |
| 시군구명     | SGG_NM         | -    | 100      | Y        | 시군구명     |
| 예측분석일시 | PREDC_ANLS_DT  | -    | 50       | Y        | 예측분석일시 |


---

# 2. KMA (기상청)

## 2-1. 기상청 AWS (방재기상관측)

- **생산주기**: 매 분 (약 3~5분 지연)  
- **관측 지점**: 전국 510개소 (`map_data/grid.csv` 참고)


### 2-1-1. AWS 매분자료 `(weather_data/(timestamp)/AWS_*.csv)`

#### 제공 항목
- 풍향/풍속 (1분 평균, 10분 평균, 최대 순간)
- 기온 (1분 평균)
- 강수 (강수감지, 15분·60분·12시간·일 누적 강수량)
- 상대습도
- 현지기압, 해면기압
- 이슬점온도  

| Index   | 설명         | 단위 / 범위                                   |
|---------|--------------|---------------------------------------------|
| WD1     | 1분 평균 풍향 | degree (0-N, 90-E, 180-S, 270-W, 360-무풍) |
| WS1     | 1분 평균 풍속 | m/s                                         |
| WDS     | 최대 순간 풍향 | degree                                      |
| WSS     | 최대 순간 풍속 | m/s                                         |
| WD10    | 10분 평균 풍향 | degree                                      |
| WS10    | 10분 평균 풍속 | m/s                                         |
| TA      | 1분 평균 기온 | °C                                          |
| RE      | 강수감지      | 0=무강수, 0이 아니면 강수                    |
| RN-15m  | 15분 누적 강수량 | mm                                        |
| RN-60m  | 60분 누적 강수량 | mm                                        |
| RN-12H  | 12시간 누적 강수량 | mm                                      |
| RN-DAY  | 일 누적 강수량  | mm                                         |
| HM      | 1분 평균 상대습도 | %                                        |
| PA      | 1분 평균 현지기압 | hPa                                      |
| PS      | 1분 평균 해면기압 | hPa                                      |
| TD      | 이슬점온도    | °C                                          |


### 2-1-2. AWS 운고·운량 `(weather_data/(timestamp)/AWS_cloud_*.csv)`

#### 제공 항목
- 하층/중층/상층 운고
- 전운량  

| Index   | 설명     | 단위 | 비고                  |
|---------|----------|------|-----------------------|
| CH_LOW  | 하층 운고 | m    | 7620m = 구름 없음     |
| CH_MID  | 중층 운고 | m    | -                     |
| CH_TOP  | 상층 운고 | m    | -                     |
| CA_TOT  | 전운량   | %    | -                     |


### 2-1-3. AWS 초상온도 `(weather_data/(timestamp)/AWS_temp_*.csv)`

#### 제공 항목
- 기온, 이슬점온도, 초상온도, 지면온도
- 상대습도
- 지중온도 (5cm ~ 5.0m)
- 현지기압, 해면기압  

| Index  | 설명             | 단위 | 비고                                    |
|--------|------------------|------|-----------------------------------------|
| TA     | 1분 평균 기온     | °C   | -                                       |
| HM     | 1분 평균 상대습도 | %    | -                                       |
| TD     | 1분 평균 이슬점온도 | °C | -                                       |
| TG     | 1분 평균 초상온도 | °C   | -                                       |
| TS     | 1분 평균 지면온도 | °C   | -                                       |
| TE0.05 | 5cm 지중온도      | °C   | -                                       |
| TE0.1  | 10cm 지중온도     | °C   | -                                       |
| TE0.2  | 20cm 지중온도     | °C   | -                                       |
| TE0.3  | 30cm 지중온도     | °C   | -                                       |
| TE0.5  | 50cm 지중온도     | °C   | -                                       |
| TE1.0  | 1.0m 지중온도     | °C   | -                                       |
| TE1.5  | 1.5m 지중온도     | °C   | -                                       |
| TE3.0  | 3.0m 지중온도     | °C   | -                                       |
| TE5.0  | 5.0m 지중온도     | °C   | -                                       |
| PA     | 1분 평균 현지기압  | hPa  | -                                       |
| PS     | 1분 평균 해면기압  | hPa  | -                                       |

> 관측값 -50 이하일 경우: 관측 없음 또는 에러 처리  
> 지중온도는 일부 지점만 관측됨  


### 2-1-4. AWS 시정 (가시거리) `(weather_data/(timestamp)/AWS_vis_*.csv)`

#### 제공 항목
- 가시거리 (1분 / 10분 평균)
- 안개/현천

| Index | 설명             | 단위/비고                                   |
|-------|------------------|--------------------------------------------|
| S     | 장비구분          | 1=안개관측망, 2=첨단화 장비                 |
| VIS1  | 1분 평균 시정     | m (샘플링 1초, 첨단화 장비)                  |
| VIS10 | 10분 평균 시정    | m (안개관측망 전용)                         |
| WW1   | 1분 순간 현천 코드| 샘플링 1초, 첨단화 장비                     |
| WW15  | 15분 평균 현천 코드| 안개관측망 전용                            |

#### 현천 코드표
| 코드 범위 | 의미   |
|-----------|--------|
| 0~2       | 맑음   |
| 4         | 연무   |
| 10        | 박무   |
| 30        | 안개   |
| 40~42     | 비     |
| 50~59     | 안개비 |
| 60~68     | 비     |
| 71~76     | 눈     |


## 2-2. 천리안2호 인공위성 API `(GK2A_data/csv/*.csv)`

### 개요
- **제공 데이터**: 화재 의심 지점, .nc파일
- **생산주기**: 약 2분마다 갱신  
- **데이터 지연**: 약 10시간  
- **적용 영역**: 한반도 전역 및 Extended Area  
- **성능**: True Positive 87.17%, False Positive 15.20%  

#### API 응답 구조

| Column | 예시 값 | 설명                                               |
|--------|------|--------------------------------------------------|
| `lat`  | 37.48554 | 화재 탐지 지점의 위도 (도)                         |
| `lon`  | 129.0597 | 화재 탐지 지점의 경도 (도)                         |
| `FF`   | 0,1  | 화재 탐지 플래그 (0: 화재 없음, 1: 화재 있음)      |
| `DQF_FF` | 10   | 데이터의 신뢰성 (0~13)                             |

#### `DQF_FF` 코드표
| 코드 | 의미                                                           |
|------|----------------------------------------------------------------|
| 0    | Invalid, 관측 범위 외 (SZA > 70°)                             |
| 1    | Invalid, 마스킹 영역 또는 입력 데이터 누락                     |
| 2    | Land                                                           |
| 3    | Water                                                          |
| 4    | Cloud                                                          |
| 5    | Rejection by cloud test                                        |
| 6    | Rejection by bare soil, urban and water test                   |
| 7    | Potential Fire                                                 |
| 8    | Fire                                                           |
| 9    | Absolute Fire                                                  |
| 10   | Industrial Heat Detection                                      |
| 12   | Stability test                                                 |
| 13   | Probably Cloud                                                 |

---

## 3. NASA FIRMS API `(firms_data/*.csv)`

### 개요
- **제공 데이터**: 위성 기반 화재 모니터링
- **생산주기**: 약 12시간마다 갱신 (일 2회)
- **적용 영역**: 한반도 전역  

#### API 응답 구조

| Column                         | 예시 값    | 설명                                   |
|--------------------------------|-----------|--------------------------------------|
| `latitude`                     | 37.48554  | 화재 탐지 지점 위도 (도)               |
| `longitude`                    | 129.05978 | 화재 탐지 지점 경도 (도)               |
| `frp`                          | 10.3      | Fire Radiative Power (MW, 화재 강도)   |
| `daynight`                     | D         | 낮/밤 여부 (D=Day, N=Night)            |
| `acq_Date`                     | 2025-08-08| 위성 관측 날짜 (UTC)                   |
| `acq_Time`                     | 0950      | 위성 관측 시간 (UTC, HHMM)             |
| `satellite`                    | Terra     | 관측 위성                              |
| `instrument`                   | MODIS     | 관측 센서                              |
| `version`                      | 6.1NRT    | 알고리즘 버전 (NRT = Near Real Time)   |
| **VIIRS_NOAA20_NRT - confidence** | n       | 화재 신뢰도 (l=low, n=normal, h=high) |
| **VIIRS_NOAA20_NRT - bright_ti4** | 331.48  | 4번 밴드 밝기 (Kelvin)                 |
| **VIIRS_NOAA20_NRT - bright_ti5** | 302.14  | 5번 밴드 밝기 (Kelvin)                 |
| **MODIS_NRT - confidence**        | 65      | 화재 신뢰도 (%)                        |
| **MODIS_NRT - brightness**        | 313.81  | 화재 픽셀 밝기 온도 (Kelvin)           |
| **MODIS_NRT - bright_t31**        | 301.66  | 31번 밴드 밝기 (Kelvin)                |

---
